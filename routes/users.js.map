{"version":3,"sources":["../../server/routes/users.js"],"names":["express","require","router","Router","mongoose","userSchema","get","req","res","queryParams","getParsedParamObject","query","find","applyQueryParamsToQuery","exec","err","users","sendError","message","status","send","data","findById","params","id","user","errorMessage","profilePicUrl","favorites","following","followers","post","name","body","username","password","create","createdUser","put","save","recipeId","push","pull","followingId","followerId","delete","remove","Types","ObjectId","errorNumber","whereParam","where","sortParam","sort","selectParam","select","skipParam","skip","limitParam","limit","countParam","count","key","undefined","JSON","parse","Promise","global","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AAAA,IACIC,SAASF,QAAQG,MAAR,EADb;AAAA,IAEIC,WAAWH,QAAQ,UAAR,CAFf;AAAA,IAGII,aAAaJ,QAAQ,mBAAR,CAHjB;;AAKAC,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC/B,QAAIC,cAAcC,qBAAqBH,GAArB,CAAlB;AACA,QAAII,QAAQN,WAAWO,IAAX,CAAgB,EAAhB,CAAZ;AACAC,4BAAwBF,KAAxB,EAA+BF,WAA/B;;AAEAE,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeC,KAAf,EAAsB;AAC7B,YAAID,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHV,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAML;AAFW,aAArB;AAIH;AACJ,KATD;AAUH,CAfD;;AAiBAd,OAAOI,GAAP,CAAW,MAAX,EAAmB,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAClC,QAAIC,cAAcC,qBAAqBH,GAArB,CAAlB;AACA,QAAII,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACAX,4BAAwBF,KAAxB,EAA+BF,WAA/B;;AAEAE,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,gBAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHlB,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAMI;AAFW,aAArB;AAIH;AACJ,KAVD;AAWH,CAhBD;;AAkBAvB,OAAOI,GAAP,CAAW,oBAAX,EAAiC,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAChD,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;;AAEAb,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,uBAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHlB,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAMI,KAAKE;AAFM,aAArB;AAIH;AACJ,KAVD;AAWH,CAdD;;AAgBAzB,OAAOI,GAAP,CAAW,gBAAX,EAA6B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC5C,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;;AAEAb,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,qBAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHlB,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAMI,KAAKG;AAFM,aAArB;AAIH;AACJ,KAVD;AAWH,CAdD;;AAgBA1B,OAAOI,GAAP,CAAW,gBAAX,EAA6B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC5C,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;;AAEAb,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,2BAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHlB,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAMI,KAAKI;AAFM,aAArB;AAIH;AACJ,KAVD;AAWH,CAdD;;AAgBA3B,OAAOI,GAAP,CAAW,gBAAX,EAA6B,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC5C,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;;AAEAb,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,qBAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHlB,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,IADQ;AAEjBG,sBAAMI,KAAKK;AAFM,aAArB;AAIH;AACJ,KAVD;AAWH,CAdD;;AAgBA5B,OAAO6B,IAAP,CAAY,GAAZ,EAAiB,UAASxB,GAAT,EAAcC,GAAd,EAAmB;AAChC,QAAIiB,OAAO;AACPO,cAAMzB,IAAI0B,IAAJ,CAASD,IADR;AAEPE,kBAAU3B,IAAI0B,IAAJ,CAASC,QAFZ;AAGPC,kBAAU5B,IAAI0B,IAAJ,CAASE;AAHZ,KAAX;;AAMA9B,eAAW+B,MAAX,CAAkBX,IAAlB,EAAwB,UAAUV,GAAV,EAAesB,WAAf,EAA4B;AAChD,YAAItB,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHV,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,yBAAS,YADQ;AAEjBG,sBAAMgB;AAFW,aAArB;AAIH;AACJ,KATD;AAUH,CAjBD;;AAmBAnC,OAAOoC,GAAP,CAAW,oBAAX,EAAiC,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AAChD,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAIG,gBAAgBpB,IAAI0B,IAAJ,CAASN,aAA7B;;AAEAhB,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKE,aAAL,GAAqBA,aAArB;AACAF,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,0BAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,gCADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBA;AACAvB,OAAOoC,GAAP,CAAW,qBAAX,EAAkC,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AACjD,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAIgB,WAAWjC,IAAI0B,IAAJ,CAASO,QAAxB;;AAEA7B,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKG,SAAL,CAAea,IAAf,CAAoBD,QAApB;AACAf,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,oBAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,gBADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBA;AACAvB,OAAOoC,GAAP,CAAW,uBAAX,EAAoC,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AACnD,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAIgB,WAAWjC,IAAI0B,IAAJ,CAASO,QAAxB;;AAEA7B,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKG,SAAL,CAAec,IAAf,CAAoBF,QAApB;AACAf,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,oBAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,kBADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBA;AACAvB,OAAOoC,GAAP,CAAW,aAAX,EAA0B,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AACzC,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAImB,cAAcpC,IAAI0B,IAAJ,CAASU,WAA3B;;AAEAhC,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKI,SAAL,CAAeY,IAAf,CAAoBE,WAApB;AACAlB,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,gBAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,iBADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBA;AACAvB,OAAOoC,GAAP,CAAW,eAAX,EAA4B,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AAC3C,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAImB,cAAcpC,IAAI0B,IAAJ,CAASU,WAA3B;;AAEAhC,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKI,SAAL,CAAea,IAAf,CAAoBC,WAApB;AACAlB,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,gBAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,mBADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBA;AACAvB,OAAOoC,GAAP,CAAW,eAAX,EAA4B,UAAS/B,GAAT,EAAcC,GAAd,EAAmB;AAC3C,QAAIG,QAAQN,WAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,CAAZ;AACA,QAAIoB,aAAarC,IAAI0B,IAAJ,CAASW,UAA1B;;AAEAjC,UAAMG,IAAN,CAAW,UAAUC,GAAV,EAAeU,IAAf,EAAqB;AAC5B,YAAIV,GAAJ,EAAS;AACLE,sBAAUT,GAAV,EAAeO,IAAIG,OAAnB,EAA4B,GAA5B;AACH,SAFD,MAEO;AACHO,iBAAKK,SAAL,CAAeW,IAAf,CAAoBG,UAApB;AACAnB,iBAAKc,IAAL,CAAU,UAAUxB,GAAV,EAAeU,IAAf,EAAqB;AAC3B,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,eAAe,gBAAnB;AACAT,8BAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,gBADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAtBD;;AAwBAvB,OAAO2C,MAAP,CAAc,MAAd,EAAsB,UAAStC,GAAT,EAAcC,GAAd,EAAmB;AACrCH,eAAWiB,QAAX,CAAoBf,IAAIgB,MAAJ,CAAWC,EAA/B,EAAmC,UAAUT,GAAV,EAAeU,IAAf,EAAqB;AACpD,YAAIV,OAAOU,SAAS,IAApB,EAA0B;AACtB,gBAAIC,eAAe,gBAAnB;AACAT,sBAAUT,GAAV,EAAekB,YAAf,EAA6B,GAA7B;AACH,SAHD,MAGO;AACHrB,uBAAWyC,MAAX,CAAkB,EAAC,OAAO1C,SAAS2C,KAAT,CAAeC,QAAf,CAAwBzC,IAAIgB,MAAJ,CAAWC,EAAnC,CAAR,EAAlB,EAAmE,UAAUT,GAAV,EAAeU,IAAf,EAAqB;AACpF,oBAAIV,GAAJ,EAAS;AACL,wBAAIW,gBAAe,gBAAnB;AACAT,8BAAUT,GAAV,EAAekB,aAAf,EAA6B,GAA7B;AACH,iBAHD,MAGO;AACHlB,wBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBF,iCAAS,cADQ;AAEjBG,8BAAMI;AAFW,qBAArB;AAIH;AACJ,aAVD;AAWH;AACJ,KAjBD;AAkBH,CAnBD;;AAqBA,SAASR,SAAT,CAAmBT,GAAnB,EAAwBkB,YAAxB,EAAsCuB,WAAtC,EAAmD;AAC/CzC,QAAIW,MAAJ,CAAW8B,WAAX,EAAwB7B,IAAxB,CAA6B;AACzBF,iBAASQ,YADgB;AAEzBL,cAAM;AAFmB,KAA7B;AAIH;;AAED,SAASX,oBAAT,CAA8BH,GAA9B,EAAmC;AAC/B,QAAIE,cAAc;AACdyC,oBAAY3C,IAAII,KAAJ,CAAUwC,KADR;AAEdC,mBAAW7C,IAAII,KAAJ,CAAU0C,IAFP;AAGdC,qBAAa/C,IAAII,KAAJ,CAAU4C,MAHT;AAIdC,mBAAWjD,IAAII,KAAJ,CAAU8C,IAJP;AAKdC,oBAAYnD,IAAII,KAAJ,CAAUgD,KALR;AAMdC,oBAAYrD,IAAII,KAAJ,CAAUkD;AANR,KAAlB;;AASA,SAAK,IAAIC,GAAT,IAAgBrD,WAAhB,EAA6B;AACzB,YAAIA,YAAYqD,GAAZ,MAAqB,IAArB,IAA6BrD,YAAYqD,GAAZ,MAAqBC,SAAtD,EAAiE;AAC7D,mBAAOtD,YAAYqD,GAAZ,CAAP;AACH,SAFD,MAEO;AACHrD,wBAAYqD,GAAZ,IAAmBE,KAAKC,KAAL,CAAWxD,YAAYqD,GAAZ,CAAX,CAAnB;AACH;AACJ;;AAED,WAAOrD,WAAP;AACH;;AAED,SAASI,uBAAT,CAAiCF,KAAjC,EAAwCF,WAAxC,EAAqD;AACjD,SAAK,IAAIqD,GAAT,IAAgBrD,WAAhB,EAA6B;AACzB,YAAIqD,QAAQ,YAAZ,EAA0B;AACtBnD,kBAAMgD,KAAN,CAAYlD,YAAYiD,UAAxB;AACH,SAFD,MAEO,IAAII,QAAQ,YAAR,IAAyBrD,YAAYmD,UAAZ,KAA2B,IAAxD,EAA+D;AAClEjD,kBAAMkD,KAAN;AACH,SAFM,MAEA,IAAIC,QAAQ,aAAZ,EAA2B;AAC9BnD,kBAAM4C,MAAN,CAAa9C,YAAY6C,WAAzB;AACH,SAFM,MAEA,IAAIQ,QAAQ,WAAZ,EAAyB;AAC5BnD,kBAAM0C,IAAN,CAAW5C,YAAY2C,SAAvB;AACH,SAFM,MAEA,IAAIU,QAAQ,WAAZ,EAAyB;AAC5BnD,kBAAM8C,IAAN,CAAWhD,YAAY+C,SAAvB;AACH,SAFM,MAEA,IAAIM,QAAQ,YAAZ,EAA0B;AAC7BnD,kBAAMwC,KAAN,CAAY1C,YAAYyC,UAAxB;AACH;AACJ;AACJ;;AAED9C,SAAS8D,OAAT,GAAmBC,OAAOD,OAA1B;AACAE,OAAOC,OAAP,GAAiB,YAAW;AAAC,WAAOnE,MAAP;AAAc,CAA3C","file":"users.js","sourcesContent":["let express = require('express'),\n    router = express.Router(),\n    mongoose = require('mongoose'),\n    userSchema = require('../models/user.js');\n\nrouter.get('/', function(req, res) {\n    let queryParams = getParsedParamObject(req);\n    let query = userSchema.find({});\n    applyQueryParamsToQuery(query, queryParams);\n\n    query.exec(function (err, users) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: users\n            });\n        }\n    });\n});\n\nrouter.get('/:id', function(req, res) {\n    let queryParams = getParsedParamObject(req);\n    let query = userSchema.findById(req.params.id);\n    applyQueryParamsToQuery(query, queryParams);\n\n    query.exec(function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"User not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: user\n            });\n        }\n    });\n});\n\nrouter.get('/profilePicUrl/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n\n    query.exec(function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"Profile pic not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: user.profilePicUrl\n            });\n        }\n    });\n});\n\nrouter.get('/favorites/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n\n    query.exec(function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"Favorites not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: user.favorites\n            });\n        }\n    });\n});\n\nrouter.get('/following/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n\n    query.exec(function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"Following users not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: user.following\n            });\n        }\n    });\n});\n\nrouter.get('/followers/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n\n    query.exec(function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"Followers not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            res.status(200).send({\n                message: 'OK',\n                data: user.followers\n            });\n        }\n    });\n});\n\nrouter.post('/', function(req, res) {\n    let user = {\n        name: req.body.name,\n        username: req.body.username,\n        password: req.body.password\n    };\n\n    userSchema.create(user, function (err, createdUser) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            res.status(201).send({\n                message: 'User added',\n                data: createdUser\n            });\n        }\n    });\n});\n\nrouter.put('/profilePicUrl/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let profilePicUrl = req.body.profilePicUrl;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.profilePicUrl = profilePicUrl;\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"Couldn't add profile pic\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Profile Pic Added Successfully',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\n// PUT A FAVORITE RECIPE FOR THIS USER\nrouter.put('/favoriteRecipe/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let recipeId = req.body.recipeId;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.favorites.push(recipeId);\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"Favorite not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Favorite added',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\n// DELETE A FAVORITED RECIPE FOR THIS USER\nrouter.put('/unfavoriteRecipe/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let recipeId = req.body.recipeId;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.favorites.pull(recipeId);\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"Favorite not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Favorite deleted',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\n// PUT A FOLLOWING FOR THIS USER\nrouter.put('/follow/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let followingId = req.body.followingId;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.following.push(followingId);\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"User not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Following added',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\n// DELETE A FOLLOWING FOR THIS USER\nrouter.put('/unfollow/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let followingId = req.body.followingId;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.following.pull(followingId);\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"User not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Following removed',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\n// PUT A FOLLOWER FOR THIS USER\nrouter.put('/follower/:id', function(req, res) {\n    let query = userSchema.findById(req.params.id);\n    let followerId = req.body.followerId;\n\n    query.exec(function (err, user) {\n        if (err) {\n            sendError(res, err.message, 500);\n        } else {\n            user.followers.push(followerId);\n            user.save(function (err, user) {\n                if (err) {\n                    let errorMessage = \"User not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'Follower added',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\nrouter.delete('/:id', function(req, res) {\n    userSchema.findById(req.params.id, function (err, user) {\n        if (err || user === null) {\n            let errorMessage = \"User not found\";\n            sendError(res, errorMessage, 404);\n        } else {\n            userSchema.remove({\"_id\": mongoose.Types.ObjectId(req.params.id)}, function (err, user) {\n                if (err) {\n                    let errorMessage = \"User not found\";\n                    sendError(res, errorMessage, 404);\n                } else {\n                    res.status(200).send({\n                        message: 'User deleted',\n                        data: user\n                    });\n                }\n            });\n        }\n    });\n});\n\nfunction sendError(res, errorMessage, errorNumber) {\n    res.status(errorNumber).send({\n        message: errorMessage,\n        data: []\n    });\n}\n\nfunction getParsedParamObject(req) {\n    let queryParams = {\n        whereParam: req.query.where,\n        sortParam: req.query.sort,\n        selectParam: req.query.select,\n        skipParam: req.query.skip,\n        limitParam: req.query.limit,\n        countParam: req.query.count\n    };\n\n    for (let key in queryParams) {\n        if (queryParams[key] === null || queryParams[key] === undefined) {\n            delete queryParams[key];\n        } else {\n            queryParams[key] = JSON.parse(queryParams[key]);\n        }\n    }\n\n    return queryParams;\n}\n\nfunction applyQueryParamsToQuery(query, queryParams) {\n    for (let key in queryParams) {\n        if (key === \"limitParam\") {\n            query.limit(queryParams.limitParam);\n        } else if (key === \"countParam\" && (queryParams.countParam === true)) {\n            query.count();\n        } else if (key === \"selectParam\") {\n            query.select(queryParams.selectParam);\n        } else if (key === \"sortParam\") {\n            query.sort(queryParams.sortParam);\n        } else if (key === \"skipParam\") {\n            query.skip(queryParams.skipParam);\n        } else if (key === \"whereParam\") {\n            query.where(queryParams.whereParam);\n        }\n    }\n}\n\nmongoose.Promise = global.Promise;\nmodule.exports = function() {return router};\n"]}